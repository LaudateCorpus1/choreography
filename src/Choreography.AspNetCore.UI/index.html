<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>%(DocumentTitle)</title>

    <!--<link href="./bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">-->
    <link href="choreography.css" rel="stylesheet">

    <script src="./jquery/dist/jquery.js"></script>
    <script src="./bootstrap/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
    <nav class="navbar navbar-light bg-light">
        <div class="container-fluid">
            <span class="navbar-brand mb-0 h1">%(DocumentTitle)</span>
        </div>
    </nav>

    <h3>%(HeadContent)</h3>
    <h4>Message Broker:  %(MessageBroker) | Topic: %(TopicName)</h4>

    <div class="w-50 container-fluid" style="margin-top: 100px">
        <div id="list-container" class="accordion"></div>
    </div>
    <script type="text/javascript">
        let schema = JSON.parse('%(Schema)');
        let container = document.getElementById('list-container');

        for (let i = 0; i < schema.length; i++) {
            let type = schema[i];
            let show = i == 0 ? 'show' : '';
            let template = `<div class="card">
                        <div class="card-header" id="h-${type.name}">
                            <h2 class="mb-0">
                                <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse" data-target="#collapse-${type.name}" aria-expanded="true" aria-controls="collapseOne">
                                    ${type.name}
                                </button>
                            </h2>
                        </div>

                        <div id="collapse-${type.name}" class="collapse ${show}" aria-labelledby="h-${type.name}" data-parent="#list-container">
                            <div class="card-body">
                                <pre id="json-${type.name}">${JSON.stringify(type.object, null, 2)}</pre>
                            </div>
                        </div>
                    </div>`;
            container.insertAdjacentHTML('beforeend', template);
        }
    </script>
</body>
</html>